{% extends 'base.html' %} {% from '_macros.html' import feature_header %} {%
block title %}{{ _('Bulletin Board') }}{% endblock %} {% block content %} {{
feature_header(_('Bulletin Board')) }} {# --- START: NEW PINNED NOTES SECTION
--- #}
<div
  id="pinned-notes-section"
  {%
  if
  not
  pinned_notes
  %}style="display: none;"
  {%
  endif
  %}
>
  <h5 class="mb-3 text-muted">
    <i class="bi bi-pin-angle-fill me-2"></i>{{ _('Pinned') }}
  </h5>
  <div id="pinned-notes-container">
    {% for post in pinned_notes %} {% include '_pinned_post_card.html' %} {%
    endfor %}
  </div>
  <hr
    id="pinned-notes-divider"
    class="my-4 {% if not pinned_notes %}d-none{% endif %}"
  />
</div>
{# --- END: NEW PINNED NOTES SECTION --- #}

<div class="chat-container-wrapper">
  <div class="chat-container" id="chat-container">
    {# The loop now iterates over the correct unpinned_notes variable #} {% for
    post in unpinned_notes %} {% include '_bulletin_post.html' %} {% endfor %}
  </div>

  <div class="chat-input-container">
    <form
      action="{{ url_for('add_note') }}"
      method="POST"
      class="note-add-form d-flex align-items-center"
    >
      <div class="flex-grow-1">
        <input
          type="text"
          name="content"
          class="form-control"
          placeholder="{{ _('Type your message...') }}"
          required
          autocomplete="off"
        />
      </div>
      <button type="submit" class="btn btn-primary btn-icon ms-2">
        <i class="bi bi-send-fill"></i>
      </button>
    </form>
  </div>
</div>

{% endblock %}
