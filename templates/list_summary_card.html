{% set total_items = list.items|length %} {% set done_items =
list.items|selectattr('done')|list|length %} {% set progress = (done_items /
total_items * 100) if total_items > 0 else 0 %}

<div class="col-md-6" id="list-card-{{ list.id }}">
  <a
    href="{{ url_for('view_list', list_id=list.id) }}"
    class="list-summary-card"
  >
    <div class="card-body">
      <h5 class="card-title">{{ list.name }}</h5>

      <p class="card-text text-muted small mb-2">
        {# This handles pluralization correctly: e.g., "1 item" vs "5 items" #}
        {{ _('%(done)s of %(total)s', done=done_items, total=total_items) }} {{
        ngettext('item complete', 'items complete', total_items) }}
      </p>

      {% if total_items > 0 and done_items == total_items %}
      <div class="d-flex align-items-center text-success">
        <i class="bi bi-check-circle-fill me-2"></i>
        <span class="fw-bold">{{ _('Completed') }}</span>
      </div>
      {% else %}
      <div class="progress" style="height: 8px">
        <div
          class="progress-bar"
          role="progressbar"
          style="width: {{ progress }}%;"
          aria-valuenow="{{ progress }}"
          aria-valuemin="0"
          aria-valuamax="100"
        ></div>
      </div>
      {% endif %}
    </div>
  </a>
</div>
