/* Import a clean, friendly font */
@import url("https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600&display=swap");

/* --- NEW: "Fresh & Focused" Design System --- */
:root {
  --bs-font-sans-serif: "Poppins", sans-serif;
  --bs-primary: #0ea5e9; /* A vibrant Sky Blue */
  --bs-primary-rgb: 14, 165, 233;
  --bs-secondary: #6366f1; /* A nice Indigo accent */
  --bs-success: #22c55e;
  --bs-danger: #ef4444;
  --bs-warning: #f97316;
  --bs-info: #06b6d4;
  --bs-light: #f1f5f9;
  --bs-dark: #1e293b;

  /* Custom Theme Variables */
  --card-bg: #ffffff; /* Solid white is cleaner */
  --card-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1),
    0 2px 4px -2px rgb(0 0 0 / 0.1);
  --card-border-radius: 0.75rem;
  --text-color: #334155; /* Slate 700 */
  --text-muted: #64748b; /* Slate 500 */
}

/* Apply a modern, subtle gradient background */
body {
  background-color: #f8fafc; /* Fallback color */
  background-image: linear-gradient(to top right, #f8fafc, #eef2ff);
  font-family: var(--bs-font-sans-serif);
  color: var(--text-color);
  /* Ensure the gradient covers the full page height */
  min-height: 100vh;
}

/* --- Base styling for cards --- */
.card {
  background: var(--card-bg);
  border-radius: var(--card-border-radius);
  box-shadow: var(--card-shadow);
  border: 1px solid #e2e8f0; /* A light grey border */
  transition: all 0.2s ease-in-out;
  overflow: hidden;
}

.card:hover {
  transform: translateY(-2px);
  box-shadow: 0 6px 16px rgba(0, 0, 0, 0.1);
}

.card-header {
  background-color: var(--bs-light);
  font-weight: 500;
}

/* Style for the user avatar in the header */
.header-avatar {
  width: 40px;
  height: 40px;
  border-radius: 50%;
  object-fit: cover;
}

/* --- List item styling --- */
.list-group-item.done .item-text-display {
  text-decoration: line-through;
  color: #6c757d; /* Muted color for completed items */
}

/* --- Notification Dot Styling --- */
.notification-dot {
  font-size: 1.5rem;
  line-height: 0;
  vertical-align: middle;
}

/* --- NEW: Dashboard Widget Styling --- */
.dashboard-widget .card-header {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  font-size: 1.1rem;
}

.dashboard-widget .list-group-item {
  border-left: 0;
  border-right: 0;
}

.dashboard-widget .list-group-item:first-child {
  border-top-left-radius: 0;
  border-top-right-radius: 0;
}

/* --- NEW: Auth Page Centering --- */
/* This class will be applied to the <body> on login/register pages */
.body-auth {
  display: flex;
  align-items: center; /* Vertical center */
  justify-content: center; /* Horizontal center */
  min-height: 100vh;
  padding: 2rem 0;
}

.auth-card {
  width: 100%;
  max-width: 420px;
}

/* --- NEW: Responsive Navigation Styles --- */

/* Desktop Sidebar */
.sidebar {
  position: fixed;
  top: 0;
  left: 0;
  bottom: 0;
  width: 280px;
  padding: 1rem;
  background-color: #212529; /* Dark background */
  color: #fff;
  z-index: 1030;
}
.sidebar-brand {
  display: flex;
  align-items: center;
  font-size: 1.5rem;
  text-decoration: none;
  color: #fff;
  margin-bottom: 1rem;
}
.sidebar .nav-link {
  font-size: 1.1rem;
  padding: 0.75rem 1rem;
  border-radius: var(--card-border-radius);
}
.sidebar .nav-link:hover,
.sidebar .nav-link.active {
  background-color: rgba(255, 255, 255, 0.1);
}

/* Main Content Area adjustments */
.main-content {
  transition: margin-left 0.3s;
}
/* On desktop, push content to the right of the sidebar */
@media (min-width: 768px) {
  .main-content {
    margin-left: 280px;
  }
}

/* --- NEW: Home Page Hub Card Styles --- */
.hub-card {
  transition: all 0.2s ease-in-out;
}
.hub-card:hover {
  transform: translateY(-5px);
  box-shadow: 0 8px 20px rgba(0, 0, 0, 0.12);
  border-color: var(--bs-primary);
}
.hub-icon {
  width: 64px;
  height: 64px;
  flex-shrink: 0; /* Prevents icon from shrinking */
}

/* --- UI Polish and Enhancements --- */

/* Make text more readable */
h1,
h2,
h3,
h4,
h5,
h6 {
  color: var(--bs-dark);
  font-weight: 600; /* Bolder headings */
}

/* Better Active Nav Link State */
.sidebar .nav-link.active,
.bottom-nav .nav-link.active {
  background-color: rgba(255, 255, 255, 0.15);
  color: #fff; /* White for sidebar */
}
.bottom-nav .nav-link.active {
  color: var(--bs-primary); /* Primary color for bottom bar */
  transform: scale(1.1);
  background-color: transparent;
}

/* More satisfying buttons */
.btn-primary {
  --bs-btn-bg: var(--bs-primary);
  --bs-btn-border-color: var(--bs-primary);
  --bs-btn-hover-bg: #2563eb;
  --bs-btn-hover-border-color: #2563eb;
  transition: all 0.2s ease-in-out;
}
.btn:hover {
  transform: translateY(-2px);
}

/* Enhance the Hub Cards on the home page */
.hub-card:hover {
  border-color: var(--bs-primary);
  box-shadow: 0 8px 24px rgba(59, 130, 246, 0.2);
}

/* Update the sidebar dropdown to match the new theme */
.sidebar .dropdown-menu {
  --bs-dropdown-bg: #2c3748;
}

/* --- SVG Icon Styling --- */
.sidebar .nav-link svg {
  width: 24px;
  height: 24px;
}

/* --- NEW: Custom Sidebar Icon Styling --- */
.sidebar-icon {
  width: 24px;
  height: 24px;
  /* This filter makes your icons solid white */
  filter: invert(100%) sepia(100%) saturate(0%) hue-rotate(288deg)
    brightness(102%) contrast(102%);
}

/* This styles the icon ONLY when the link is active */
.sidebar .nav-link.active .sidebar-icon {
  /* This filter recolors your icons to the primary theme color */
  filter: invert(53%) sepia(91%) saturate(2227%) hue-rotate(176deg)
    brightness(97%) contrast(92%);
}

/* --- UNIFIED CUSTOM ICON STYLING FOR BOTTOM NAV --- */

.bottom-nav-icon {
  width: 28px;
  height: 28px;
  /* By default, color the icons with the muted text color */
  /* This filter is for our text-muted color #64748b */
  filter: invert(47%) sepia(11%) saturate(579%) hue-rotate(175deg)
    brightness(95%) contrast(86%);
  transition: filter 0.2s ease-in-out;
}

/* Recolor the icon to primary blue ONLY when the link is active */
.bottom-nav .nav-link.active .bottom-nav-icon {
  /* This filter is for our primary color #0ea5e9 */
  filter: invert(53%) sepia(91%) saturate(2227%) hue-rotate(176deg)
    brightness(97%) contrast(92%);
}

/* --- NEW: Live Heroicon Calendar Styling --- */

/* The wrapper acts as our positioning canvas */
.live-icon-wrapper {
  position: relative; /* This is the key! */
  top: 5px;
  display: inline-flex; /* Aligns the icon and number correctly */
  align-items: center;
  justify-content: center;
}

/* The SVG icon itself doesn't need much styling */
.live-icon-wrapper svg {
  width: 24px;
  height: 24px;
}

/* The number showing the day */
.live-icon-day {
  position: absolute; /* This lifts the number off the page */
  top: 62%; /* Position it vertically */
  left: 50%; /* Position it horizontally */
  transform: translate(-50%, -50%); /* Center it perfectly */

  font-size: 10px;
  font-weight: 700;
  color: currentColor; /* Inherit color from the parent link */
  line-height: 1;
}

/* --- Mobile Version Adjustments --- */
.bottom-nav .live-icon-wrapper svg {
  width: 28px;
  height: 28px;
}

.live-icon-day--mobile {
  font-size: 11px;
}

/* --- Live Date on Dashboard Calendar Icon --- */

.hub-icon-wrapper {
  position: relative; /* The positioning canvas */
  /* This ensures the wrapper is the same size as the icon inside it */
  width: 64px;
  height: 64px;
}

.hub-icon-day {
  position: absolute;
  top: 62%; /* A good starting point for the larger icon */
  left: 50%;
  transform: translate(-50%, -50%);

  font-size: 25px; /* Larger font for the bigger icon */
  font-weight: 700;
  color: var(--bs-dark); /* Use our main theme color */
  line-height: 1;
  /* A subtle shadow helps the number stand out from the icon's details */
  text-shadow: 0px 1px 2px rgba(255, 255, 255, 0.5);
}

/* --- Mobile Live Calendar Icon Adjustments --- */

.bottom-nav .live-icon-wrapper svg {
  width: 28px; /* Match the other bottom nav icons */
  height: 28px;
}

.bottom-nav .live-icon-day {
  font-size: 11px; /* Slightly larger font for the bigger icon */
  top: 67%; /* Use the same perfect vertical position */
}

/* ========================================= */
/* Chore Board Redesign Styles               */
/* ========================================= */

.chore-board {
  display: flex;
  flex-direction: column;
  gap: 0.75rem; /* Space between cards */
}

.chore-card {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 0.75rem 1rem;
  background-color: #fff;
  border: 1px solid var(--bs-border-color);
  border-radius: var(--bs-card-border-radius);
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
  transition: background-color 0.3s ease, opacity 0.3s ease;
}

.chore-info {
  display: flex;
  flex-direction: column;
  gap: 0.25rem;
  flex-grow: 1;
  margin-right: 1rem;
}

.chore-title {
  font-size: 1rem;
  font-weight: 500;
  color: var(--bs-body-color);
}

.chore-points {
  font-size: 0.75rem;
  padding: 0.25em 0.5em;
  width: fit-content;
}

.completion-button {
  flex-shrink: 0;
  width: 32px;
  height: 32px;
  border-radius: 50%;
  border: 2px solid var(--bs-gray-400);
  background-color: transparent;
  color: white;
  display: flex;
  justify-content: center;
  align-items: center;
  transition: background-color 0.3s ease, border-color 0.3s ease;
}

.completion-button .icon-check {
  display: none; /* Hidden by default */
  font-size: 1.25rem;
}

.completion-button:not(:disabled):hover {
  background-color: var(--bs-gray-200);
}

/* --- Completed State --- */

.chore-card.is-complete {
  /* Use a Bootstrap theme color for a light green background */
  background-color: var(--bs-success-bg-subtle);
  /* We don't need to fade it out anymore */
  /* opacity: 0.7; */
}

.chore-card.is-complete .completion-button {
  /* Use the main success color for the button */
  background-color: var(--bs-success);
  border-color: var(--bs-success);
}

.chore-card.is-complete .completion-button .icon-check {
  display: block; /* Show the checkmark when complete */
}

/* Add this to the end of the Chore Board Redesign Styles */

.completion-button.is-disabled {
  pointer-events: none; /* This prevents all click events */
  opacity: 0.5;
  cursor: not-allowed;
}

/* ========================================= */
/* Stacked Modal Overlay Style               */
/* ========================================= */

/* Apply this class to a modal that is behind another one */
.modal.modal-behind {
  /* Fade it back visually */
  opacity: 0.4;
  /* Make it non-interactive */
  pointer-events: none;
  /* Use Bootstrap's timing for a smooth transition */
  transition: opacity 0.15s linear;
}

/* =================================
   Summary Card Layout (Final Design)
   ================================= */

/* --- Dashboard Summary Cards --- */
.list-summary-card {
  display: block;
  color: inherit;
  text-decoration: none;
  background-color: #fff;
  border: 1px solid var(--bs-border-color-translucent);
  border-radius: 0.75rem;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);
  transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
}
.list-summary-card:hover {
  transform: translateY(-5px);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
  color: inherit;
}
.list-summary-card .card-body {
  padding: 1.5rem;
}
.list-summary-card .card-title {
  font-weight: 600;
}
.list-summary-card .progress {
  height: 8px;
}
.list-summary-card .preview-list {
  list-style: none;
  padding-left: 0;
  margin-top: 1rem;
  font-size: 0.95rem;
  color: var(--bs-secondary-color);
}
.list-summary-card .preview-list li {
  margin-bottom: 0.25rem;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

/* --- Single List View --- */
#items-list .list-group-item,
#completed-items-list .list-group-item {
  border-width: 0 0 1px 0; /* Only bottom border */
  border-radius: 0;
  padding: 1rem 0.5rem;
  display: flex;
  align-items: center;
  transition: background-color 0.2s;
}
#items-list .list-group-item:last-child {
  border-bottom-width: 0;
}
#items-list .form-check-input,
#completed-items-list .form-check-input {
  margin-top: 0;
  margin-right: 1rem;
  transform: scale(1.2);
}
#completed-items-list .list-group-item .item-text-display {
  text-decoration: line-through;
  color: var(--bs-secondary-color);
}
.completed-items-header .btn {
  font-size: 1.1rem;
  font-weight: 600;
  color: var(--bs-secondary-color);
}
.completed-items-header .btn .bi {
  transition: transform 0.3s;
}
.completed-items-header .btn[aria-expanded="false"] .bi {
  transform: rotate(-90deg);
}

/* --- Floating Action Button (FAB) --- */
.fab {
  position: fixed;
  bottom: 20px; /* Lowered, as there's no bottom nav */
  right: 20px;
  width: 60px;
  height: 60px;
  box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
  display: flex; /* Added for centering */
  align-items: center; /* Added for centering */
  justify-content: center; /* Added for centering */
  z-index: 1050; /* Ensure it's above other content */
}

/* Add this new rule to style the icon inside the FAB */
.fab .bi {
  font-size: 1.75rem;
  line-height: 1;
}

/* =======================================================
   Meal Planner Final Design (Header & Icon Color on Planned)
   ======================================================= */

/* --- 1. The "Planned" State --- */
/* These rules ONLY apply when a card has the .meal-planned class.
   They color the header of the card. */

/* Monday */
.meal-day-card.day-monday.meal-planned .card-header {
  background-color: #fdea46;
  color: #fdea46;
}

/* Tuesday */
.meal-day-card.day-tuesday.meal-planned .card-header {
  background-color: #d65488;
  color: #d65488;
}

/* Wednesday */
.meal-day-card.day-wednesday.meal-planned .card-header {
  background-color: #81c784;
  color: #388e3c;
}

/* Thursday */
.meal-day-card.day-thursday.meal-planned .card-header {
  background-color: #ffb74d;
  color: #e65100;
}

/* Friday */
.meal-day-card.day-friday.meal-planned .card-header {
  background-color: #2fa5ea;
  color: #2fa5ea;
}

/* Saturday (with white text for contrast) */
.meal-day-card.day-saturday.meal-planned .card-header {
  background-color: #7c40a2;
  color: #ffffff;
}

/* Sunday (with white text for contrast) */
.meal-day-card.day-sunday.meal-planned .card-header {
  background-color: #e53935;
  color: #ffffff;
}

/* --- 2. Themed Icon Color --- */
/* This is the NEW section. When a meal is planned, we target the
   notes indicator and set its color to match the header's text color. */

.meal-day-card.day-monday.meal-planned .meal-notes-indicator {
  color: #ffe924;
  opacity: 0.9;
}
.meal-day-card.day-tuesday.meal-planned .meal-notes-indicator {
  color: #c2185b;
  opacity: 0.9;
}
.meal-day-card.day-wednesday.meal-planned .meal-notes-indicator {
  color: #388e3c;
  opacity: 0.9;
}
.meal-day-card.day-thursday.meal-planned .meal-notes-indicator {
  color: #ffb74d;
  opacity: 0.9;
}
.meal-day-card.day-friday.meal-planned .meal-notes-indicator {
  color: #0277bd;
  opacity: 0.9;
}
.meal-day-card.day-saturday.meal-planned .meal-notes-indicator {
  color: #7c40a2;
  opacity: 0.9;
} /* Use white for dark backgrounds */
.meal-day-card.day-sunday.meal-planned .meal-notes-indicator {
  color: #e53935;
  opacity: 0.9;
} /* Use white for dark backgrounds */

/* --- 3. General Styling --- */

/* Add a smooth transition for the header's background color change */
.meal-day-card .card-header {
  transition: background-color 0.3s ease-in-out;
}

/* Ensure the date text inside the header inherits the new color when it appears */
.meal-day-card .card-header small {
  color: inherit;
  opacity: 0.9;
  transition: color 0.3s ease-in-out;
}

/* Notes Icon Positioning and Default State */
.meal-card-body {
  position: relative;
}

.meal-notes-indicator {
  position: absolute;
  bottom: 0.75rem;
  right: 0.75rem;
  font-size: 1.1rem;
  /* Default color for unplanned days */
  color: var(--bs-secondary-color);
  opacity: 0.6;
  /* Smooth transition for the color change */
  transition: color 0.3s ease-in-out, opacity 0.3s ease-in-out;
}

/* Styles for past, non-editable days in the meal planner */
.meal-day-card.past-day {
  background-color: #f8f9fa; /* A standard Bootstrap light grey */
}

.meal-day-card.past-day .card-body {
  cursor: not-allowed;
}

/* Make the text and icons inside past cards slightly faded */
.meal-day-card.past-day .card-body,
.meal-day-card.past-day .card-header {
  opacity: 0.7;
}

/* --- Calendar Grid Styles --- */
.calendar-grid th {
  height: 40px;
  vertical-align: middle;
}

.calendar-day {
  height: 120px;
  vertical-align: top;
  padding: 8px;
  cursor: pointer;
  transition: background-color 0.2s ease-in-out;
}

.calendar-day:hover {
  background-color: #f8f9fa; /* Light grey on hover */
}

.calendar-day .day-number {
  text-align: right;
  font-size: 0.9em;
  font-weight: bold;
  color: #6c757d;
}

.calendar-day.other-month {
  background-color: #f8f9fa;
}

.calendar-day.other-month .day-number,
.calendar-day.other-month .events-container {
  opacity: 0.5;
}

.calendar-day.today {
  border: 2px solid #0d6efd;
}

.calendar-day.today .day-number {
  background-color: #0d6efd; /* Bootstrap primary blue */
  color: white;
  border-radius: 50%;
  width: 28px;
  height: 28px;
  text-align: center;
  line-height: 28px;
  float: right;
}

.events-container {
  margin-top: 5px;
  font-size: 0.85em;
  max-height: 70px;
  overflow-y: auto;
}

.event-badge {
  background-color: #0d6efd; /* Bootstrap primary blue */
  color: white;
  padding: 3px 6px;
  border-radius: 0.25rem;
  margin-bottom: 4px;
  display: block;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.event-badge .event-time {
  font-weight: 600;
  margin-right: 5px;
}

/* ========================================= */
/* START: NEW Mobile Top Header Styles       */
/* ========================================= */

.mobile-top-header {
  padding: 0.5rem 0; /* A bit of vertical padding */
  border-bottom: 1px solid #e2e8f0; /* Use a light grey border */
}

.mobile-header-avatar {
  width: 40px;
  height: 40px;
  object-fit: cover;
  border: 2px solid #e2e8f0;
}

.mobile-top-header a {
  text-decoration: none;
}

/* ========================================= */
/* START: NEW Feature Header Styles          */
/* ========================================= */

.feature-header {
  border-bottom: 1px solid #e2e8f0;
  padding-bottom: 1rem;
}

.feature-header-back-button {
  font-size: 1.75rem;
  color: var(--text-color);
  margin-right: 1rem;
  line-height: 1;
}

.feature-header-title {
  flex-grow: 1;
}
